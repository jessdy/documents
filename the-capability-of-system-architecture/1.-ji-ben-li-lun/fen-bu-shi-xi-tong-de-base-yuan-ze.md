---
description: 分布式系统经典理论，大部分分布式系统都基于此原则构建
---

# 分布式系统的BASE原则

{% hint style="info" %}
### BASE：Basic Available, Soft state, Eventually consistent（即：基本可用，软状态，最终一致性）
{% endhint %}

由于分布式系统无法同时满足CAP特性。因此，在CAP三者的取舍方面，业界总结了一套最佳实践。即BASE。

### Base Available

当系统发生了不可预知的问题时，允许损失部分可用性，但依然保证系统的大部分可用。其中包括：

1. 时间损失，原来需要0.5秒完成的操作，可能在发生故障时增加到1秒甚至更多完成，但依然能够完成
2. 功能损失，当大量用户使用时，例如秒杀等大并发时，保证部分用户的功能得到满足，另一部分用户采用降级处理，引导至等待或其他页面。

### Soft state

弱状态或软状态，当网络发生故障等情况发生，不强制要求所有节点一致性。在不破坏系统整体的情况下允许部分节点存在中间状态。

### Eventually consistent

最终一致性是BASE中最重要的一环，由于上述存在了中间状态，那就要求系统在最终保证一致性。最终一致性分为五类：

1. **因果一致性（Causal consistency）** 如果节点 A 在更新完某个数据后通知了节点 B，那么节点 B 之后对该数据的访问和修改都是基于 A 更新后的值。于此同时，和节点 A 无因果关系的节点 C 的数据访问则没有这样的限制。
2. **读己之所写（Read your writes）** 节点 A 更新一个数据后，它自身总是能访问到自身更新过的最新值，而不会看到旧值。
3. **会话一致性（Session consistency）** 会话一致性将对系统数据的访问过程框定在了一个会话当中：系统能保证在同一个有效的会话中实现 “读己之所写” 的一致性，也就是说，执行更新操作之后，客户端能够在同一个会话中始终读取到该数据项的最新值。
4. **单调读一致性（Monotonic read consistency）** 单调读一致性是指如果一个节点从系统中读取出一个数据项的某个值后，那么系统对于该节点后续的任何数据访问都不应该返回更旧的值。
5. **单调写一致性（Monotonic write consistency）** 指一个系统要能够保证来自同一个节点的写操作被顺序的执行。

这5类最终一致性通常都需要结合使用才能构建健康的分布式系统。



